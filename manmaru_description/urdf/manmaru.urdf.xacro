<?xml version="1.0"?>
<robot name="manmaru" xmlns:xacro="http://ros.org/wiki/xacro">

   <xacro:macro name="wheel" params="prefix x y">
      <link name="${prefix}_wheel">
         <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
               <mesh filename="package://manmaru_description/meshes/wheel.stl"/>
            </geometry>
         </visual>
         <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
               <mesh filename="package://manmaru_description/meshes/wheel.stl"/>
            </geometry>
         </collision>
         <!-- Mass and inertia matrix are generated by Onshape's mass properties tool -->
         <!-- Material: Polyurethane -->
         <inertial>
            <origin
               xyz="0 0 0"
               rpy="0 0 0" />
            <mass
               value="0.022" />
            <inertia
               ixx="3.533e-6"
               ixy="0"
               ixz="0"
               iyy="6.714e-6"
               iyz="0"
               izz="3.533e-6" />
         </inertial>
      </link>
      <joint name="${prefix}_wheel_joint" type="continuous">
         <origin xyz="${x} ${y} 0" rpy="0 0 0"/>
         <axis xyz="0 1 0" rpy="0 0 0" />
         <parent link="classis"/>
         <child link="${prefix}_wheel"/>
      </joint>
   </xacro:macro>

   <link name="base_link" />

   <joint name="base_link_to_chassis" type="fixed">
      <parent link="base_link"/>
      <child link="classis"/>
   </joint>

   <link name="classis">
      <visual>
         <origin xyz="0 0 0" rpy="0 0 0" />
         <geometry>
            <mesh filename="package://manmaru_description/meshes/base.stl"/>
         </geometry>
      </visual>
      <collision>
         <origin xyz="0 0 0" rpy="0 0 0" />
         <geometry>
            <mesh filename="package://manmaru_description/meshes/base.stl"/>
         </geometry>
      </collision>
      <!-- Mass and inertia matrix are generated by Onshape's mass properties tool -->
      <!-- Material: Aluminum -->
      <inertial>
         <origin
            xyz="0 0 0"
            rpy="0 0 0" />
         <mass
            value="0.354" />
         <inertia
            ixx="9.785e-5"
            ixy="-2.359e-10"
            ixz="0"
            iyy="2.357e-4"
            iyz="1.475e-10"
            izz="2.855e-4" />
      </inertial>
   </link>

   <!-- Four wheels -->
   <xacro:wheel prefix="left_front"  x="0.04"  y="0.04"/>
   <xacro:wheel prefix="left_rear"   x="-0.04" y="0.04"/>
   <xacro:wheel prefix="right_front" x="0.04"  y="-0.04"/>
   <xacro:wheel prefix="right_rear"  x="-0.04" y="-0.04"/>

   <!-- LiDAR -->
   <xacro:include filename="lidar.urdf.xacro" />

   <!-- Manipulator -->
   <xacro:include filename="manipulator.urdf.xacro" />

   <!-- Gazebo plugins -->
   <xacro:include filename="gazebo.urdf" />

</robot>